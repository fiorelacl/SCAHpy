# Instalación

Esta sección describe los métodos recomendados para instalar **SCAHpy**, tanto en entornos locales como en clústeres de cómputo de alto rendimiento (HPC).  
El paquete está desarrollado para funcionar sobre ecosistemas científicos modernos que utilizan principalmente *xarray*, *netCDF4*, *matplotlib*.

## 1. Requisitos previos

Antes de instalar SCAHpy, verifica lo siguiente:

- **Python** versión **3.9** o superior.  
- mamba o conda instalados (recomendado).  
- Acceso a internet para descargar dependencias desde *conda-forge* o *PyPI*.
- En entornos HPC, asegúrate de instalar en tu HOME (evita rutas del sistema).

Opcionalmente, puedes instalar:

- `cartopy` para visualización geográfica,
- `dask` para procesamiento paralelo (altamente recomendado en HPC),
- `jupyterlab` para entornos interactivos.

## **Instrucciones paso a paso**

Estas instrucciones deberían funcionar en la mayoría de sistemas operativos, incluidos *Windows*, *macOS* y *Linux*, ya que `Conda` y `Miniforge` están diseñados para ser multiplataforma. Sin embargo, pueden existir ligeras diferencias en el proceso de instalación o en la sintaxis de algunos comandos según el sistema operativo.

Para garantizar claridad y compatibilidad en todos los sistemas, considere lo siguiente:

### **Windows:**

  * Es posible que se requiera abrir la terminal o el *Command Prompt* como administrador para ejecutar algunos comandos.
  * Las rutas en la terminal deben escribirse con barras invertidas (`\`) en lugar de barras normales (`/`).

### **macOS:**

  * Es posible que los usuarios necesiten instalar las *Command Line Developer Tools* si aún no lo han hecho. Esto se puede realizar ejecutando `xcode-select --install` en la terminal.
  * Asegúrese de que el usuario tenga permisos para ejecutar scripts e instalar paquetes.

### **Linux:**

  * Algunas distribuciones pueden requerir dependencias adicionales o configuraciones específicas para que Conda o Miniforge funcionen correctamente. Se recomienda consultar la documentación de la distribución correspondiente.

---

## **Usando Conda**

### 1. Descargar e instalar Miniforge

* Antes de instalar `scahpy`, asegúrese de tener Conda instalado en su sistema. Miniforge es una distribución mínima de Conda que incluye las herramientas esenciales para la gestión de entornos y paquetes.

* Visite la página de [Miniforge en GitHub](https://github.com/conda-forge/miniforge) y siga las instrucciones para descargar e instalar la versión adecuada para su sistema operativo.

### 2. Crear un nuevo entorno Conda e instalar SCAHpy

* Una vez instalado Conda, puede crear un entorno nuevo específicamente para `scahpy` y sus dependencias. Para ello, se utiliza un archivo llamado `environment.yml`, que contiene la lista de paquetes y versiones requeridos para el correcto funcionamiento de `scahpy`.

* Descargue el archivo `environment.yml` desde el [repositorio de SCAHpy en GitHub](https://github.com/fiorelacl/SCAHpy/blob/4ec3cca0a13444411a0dcb28221f3ee982a2594b/environment.yml).

* Abra una terminal o consola y navegue al directorio donde se encuentra el archivo `environment.yml`.

* Ejecute el siguiente comando para crear un entorno Conda llamado `scahpy_env` e instalar todas las dependencias especificadas:

```bash
conda env create --file environment.yml -n scahpy_env
```

* Este comando creará un entorno nuevo llamado `scahpy_env` e instalará todas las dependencias listadas en el archivo `environment.yml`.

* Una vez creado el entorno, actívelo con:

```bash
conda activate scahpy_env
```

Después de esto, tendrá `scahpy` y todas sus dependencias instaladas y listas para usarse dentro de su entorno Conda.

---

## **Usando Mamba**

### 1. Descargar e instalar Mamba

Antes de instalar `scahpy`, asegúrese de tener Mamba instalado. Mamba es un gestor de paquetes muy rápido compatible con Conda y puede instalarse mediante Miniforge.

* Visite la página de [Miniforge en GitHub](https://github.com/conda-forge/miniforge) y descargue la versión adecuada para su sistema operativo.

### 2. Instalar SCAHpy y sus dependencias

* La forma más recomendada de instalar `scahpy` junto con todas sus dependencias es mediante el archivo `environment.yml`.

* Descargue el archivo desde el [repositorio de SCAHpy en GitHub](https://github.com/fiorelacl/SCAHpy/blob/4ec3cca0a13444411a0dcb28221f3ee982a2594b/environment.yml).

* Desde la terminal, navegue al directorio donde está el archivo y ejecute:

```bash
mamba env create --file environment.yml -n scahpy_env
```

* Esto creará un entorno Conda llamado `scahpy_env` e instalará todos los paquetes necesarios.

Una vez finalizado, el entorno estará listo para ejecutar `scahpy`.

---

## **Usando pip**

1. Primero, asegúrese de tener Python y pip instalados en su sistema. Puede descargar Python desde el [sitio oficial](https://www.python.org/downloads/); usualmente pip viene incluido.

2. La forma más sencilla de instalar `scahpy` y sus dependencias con pip es creando un entorno virtual e instalando desde un archivo `requirements.txt`.

En la terminal:

```bash
# Crear un entorno virtual (opcional pero recomendado)
python -m venv scahpy_env

# Activar el entorno virtual
# En Windows:
scahpy_env\Scripts\activate
# En macOS/Linux:
source scahpy_env/bin/activate

# Instalar scahpy y dependencias desde requirements.txt
pip install -r requirements.txt
```

En este ejemplo, `requirements.txt` debe contener la lista de dependencias (incluyendo `scahpy`) con sus respectivas versiones. Este archivo debe proporcionarse o generarse previamente, puede tomar como referencia environment.yml previamente proporcionado.
